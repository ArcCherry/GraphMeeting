# GraphMeeting | å›¾ä¼šè®® - Agent å¼€å‘æŒ‡å—

> **æ¶æ„æ›´æ–°ï¼ˆ2026-02-06ï¼‰**ï¼šä» Flutter + Rust FFI æ”¹ä¸º**çº¯ Flutter å®ç°**ï¼Œç®€åŒ–æ¶æ„ï¼ŒåŠ é€Ÿå¼€å‘ã€‚

> **æ ¸å¿ƒä½¿å‘½**ï¼šè§£å†³å¤šäººä¼šè®®å¤æ‚åº¦çˆ†ç‚¸é—®é¢˜ï¼Œé€šè¿‡"å¼‚æ­¥éçº¿æ€§ + ä¸‰ç»´å¯è§†åŒ– + æ¸¸æˆåŒ–åä½œ"é‡æ–°å®šä¹‰ä¼šè®®ä½“éªŒã€‚

---

## 1. é¡¹ç›®èƒŒæ™¯ä¸æ„¿æ™¯

### 1.1 é—®é¢˜å®šä¹‰
ä¼ ç»Ÿä¼šè®®é¢ä¸´**å¤æ‚åº¦çˆ†ç‚¸**ï¼š
- çº¿æ€§å‘è¨€ â†’ æ‰“æ–­ã€ç­‰å¾…ã€æ•ˆç‡ä½ä¸‹
- åŒæ—¶åœ¨çº¿ â†’ æ—¶é—´åè°ƒå›°éš¾
- ä¿¡æ¯è¿‡è½½ â†’ ä¼šè®®çºªè¦æ— æ³•æ•æ‰æ€ç»´è„‰ç»œ
- å…±è¯†å›°éš¾ â†’ è°åŒæ„è°åå¯¹éš¾ä»¥å¯è§†åŒ–

### 1.2 æ ¸å¿ƒæ´å¯Ÿ
> "å‚ä¼šè€…åƒç»™æ’­å®¢å½•éŸ³ä¸€æ ·å„è‡ªç‹¬ç™½ï¼ŒAI åœ¨åŒä¸€æ—¶åˆ»æŠŠæ‰€æœ‰äººç‹¬ç™½å‰ªæˆèŠ‚ç‚¹ï¼ŒæŒ‚åˆ°ä¸€å¼ ä¼šè¯´è¯çš„åä½œæ˜Ÿå›¾ä¸Šã€‚"

### 1.3 äº§å“æ„¿æ™¯
**æ€ç»´å»ºç­‘å·¥åœ° (Mind Construction Site)**ï¼š
- æ¯ä¸ªå‚ä¸è€…æ˜¯**å·¥èœ‚èˆ¬çš„ Avatar**ï¼Œåœ¨è™šç©ºä¸­é£è¡Œã€æ”¾ç½®æƒ³æ³•æ–¹å—
- å›æ”¾æ—¶çœ‹åˆ°ä¸€åº§**è®¤çŸ¥å®«æ®¿**æ‹”åœ°è€Œèµ·ï¼ˆç±»ä¼¼ Minecraft å»¶æ—¶æ‘„å½±ï¼‰
- æœ€ç»ˆäº§å‡ºæ˜¯**ç”µå½±çº§è§†è§‰å™äº‹**ï¼Œè€Œéæ¯ç‡¥çš„ä¼šè®®çºªè¦

---

## 2. æ ¸å¿ƒè®¾è®¡åŸåˆ™

### 2.1 ä¼šè®®èŒƒå¼é©æ–°

| ä¼ ç»Ÿä¼šè®® | GraphMeeting |
|---------|-------------|
| "åŒæ—¶åœ¨çº¿" | **é›¶åŒæ—¶åœ¨çº¿** - å®Œå…¨å¼‚æ­¥ï¼Œç³»ç»Ÿ 7Ã—24 æ”¶é›†è¯­éŸ³ |
| "éº¦å…‹é£" | **å•å‘å½•åˆ¶é€šé“** - åªèƒ½è¯´è¯ï¼Œå¬ä¸åˆ°åˆ«äººï¼Œé¿å…æ‰“æ–­ |
| "å‘è¨€é¡ºåº" | **æ— é¡ºåº** - æ¯å¥è¯ç«‹åˆ»å˜æˆèŠ‚ç‚¹ï¼Œå¹¶å‘å†™å…¥ |
| "å›åˆ" | **å›¾ç‰ˆæœ¬å·** - æ¯ 5 ç§’ç”Ÿæˆæ–°å›¾ï¼Œæ‰€æœ‰äººçœ‹æœ€æ–°åˆå¹¶ç‰ˆ |
| "ä¸¾æ‰‹" | **èŠ‚ç‚¹é¢œè‰²** - ç»¿è‰²=å…±è¯†ï¼Œçº¢è‰²=äº‰è®®ï¼Œä¸€ç›®äº†ç„¶ |

### 2.2 ä¸‰ç»´æ•°æ®ç»“æ„ï¼šChrono-Vineï¼ˆæ—¶åºè—¤è”“ï¼‰

**åæ ‡ç³»å®šä¹‰**ï¼š
- **Yè½´ï¼ˆæ—¶é—´â†‘ï¼‰**ï¼šèºæ—‹æŸ±æˆ–ç›´çº¿ï¼Œæ­£æ–¹å‘å‘ä¸Š
- **Xè½´ï¼ˆå‚ä¸è€…ç¯ç»•ï¼‰**ï¼šæ¯ä¸ªå‚ä¸è€…å æ®ä¸€ä¸ªè½¨é“ï¼Œç¯ç»•æ—¶é—´æŸ±åˆ†å¸ƒ
- **Zè½´ï¼ˆè¯­ä¹‰æ·±åº¦ï¼‰**ï¼šAI å¶å­å±‚å åœ¨å…³é”®èŠ‚ç‚¹ä¸Šæ–¹

```
                    Y (æ—¶é—´ â†‘)
                    â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ç”¨æˆ·A: â—â”€â”€â—â”€â”¼â”€â—â”€â”€â—          â”‚
    â”‚         â”‚     â”‚  \            â”‚
    â”‚   ç”¨æˆ·B: â—â”€â”€â—â”€â”¼â”€â—   â—â”€â”€â—       â”‚
    â”‚               â”‚       \       â”‚
    â”‚   ç”¨æˆ·C:      â—â”€â”€â—â”€â”€â—â”€â”€â—â”€â”€â—    â”‚
    â”‚               â”‚               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ X (å‚ä¸è€…ç»´åº¦)
                   /
                  Z (è¯­ä¹‰æ·±åº¦)
                  ğŸƒ AI å¶å­å±‚å 
                  ğŸ“‹ Todo æ¸…å•
                  ğŸ”— å…³è”æ¨è
```

**å¸ƒå±€ç­–ç•¥**ï¼š
1. **èºæ—‹æŸ±æ—¶é—´è½´**ï¼šæ—¶é—´æ²¿ä¸­å¿ƒæŸ±å‘ä¸Šå»¶ä¼¸
2. **ç¯ç»•è½¨é“**ï¼šå‚ä¸è€…åƒè—¤è”“ä¸€æ ·ç¼ ç»•åœ¨æŸ±å­ä¸Š
3. **åˆ†å‰æ£€æµ‹**ï¼šè¯é¢˜è½¬å˜æˆ–å›å¤éç›´æ¥ä¸Šçº§æ—¶äº§ç”Ÿæ–°åˆ†æ”¯
4. **åˆå¹¶ç‚¹**ï¼šæ˜¾å¼å¼•ç”¨/åŒæ„å‰äººè§‚ç‚¹æ—¶æ±‡èš
5. **AI å¶å­**ï¼šåœ¨é«˜å¯†åº¦ã€å†³ç­–ç‚¹è‡ªåŠ¨ç”Ÿæˆè¯­ä¹‰å±‚å 

### 2.3 Avatar å®ä½“åŒ–ç³»ç»Ÿ

æ¯ä¸ªå‚ä¸è€…æ˜¯ä¸€ä¸ª**å¯é£è¡Œçš„ 3D Avatar**ï¼š
- **Idle**ï¼šæ‚¬æµ®è§‚æœ›
- **Flying**ï¼šé£è¡Œå†²åˆºï¼ˆåƒé’¢é“ä¾ ï¼‰
- **Working**ï¼šåœ¨èŠ‚ç‚¹ä¸Šä½œä¸šï¼ˆç§æ¤/è¿æ¥/è§£å†³äº‰è®®ï¼‰
- **Teleporting**ï¼šé£èµ°/ä¼ é€

### 2.4 èŠ‚ç‚¹ä½œä¸ºå»ºç­‘æ–¹å—

| èŠ‚ç‚¹ç±»å‹ | è§†è§‰è¡¨ç° | å«ä¹‰ |
|---------|---------|------|
| VoiceBlock | å‘å…‰æ–¹å— | è¯­éŸ³å†…å®¹ï¼Œå¤§å°ä¸æ—¶é•¿æˆæ­£æ¯” |
| ConsensusCrystal | å¤šé¢æ°´æ™¶ | è¾¾æˆå…±è¯†ï¼Œå¤šé¢ä½“æŠ˜å°„å…‰çº¿ |
| ContentionRubble | ç¢çŸ³/è†æ£˜ | äº‰è®®å¾…è§£å†³ï¼Œçº¢è‰²è„‰å†² |
| AIFlower | èŠ±æœµ/æœå® | AIæ€»ç»“ä¸å¯æ‰§è¡Œé¡¹ |

### 2.5 äº‰è®®è§£å†³æ¸¸æˆåŒ–

å¤šäººåŒæ—¶é è¿‘äº‰è®®èŠ‚ç‚¹ â†’ å‘å°„"æ²»æ„ˆå…‰æŸ" â†’ è¿›åº¦ç¯å¡«å…… â†’ è½¬åŒ–ä¸ºå…±è¯†æ°´æ™¶ã€‚

**Boss Fight æ„Ÿ**ï¼šäº‰è®®ä¸æ˜¯äº‰åµï¼Œè€Œæ˜¯åä½œæŒ‘æˆ˜ã€‚

---

## 3. æŠ€æœ¯æ¶æ„ï¼ˆçº¯ Flutterï¼‰

### 3.1 åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Flutter App                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   UI å±‚     â”‚  â”‚  3D å¼•æ“    â”‚  â”‚  çŠ¶æ€ç®¡ç†        â”‚ â”‚
â”‚ â”‚ (æ’­æ”¾æ§åˆ¶)   â”‚  â”‚ (Custom     â”‚  â”‚ (Riverpod)       â”‚ â”‚
â”‚ â”‚ (æˆ¿é—´åˆ—è¡¨)   â”‚  â”‚  Painter)   â”‚  â”‚ (æœ¬åœ° + åŒæ­¥)    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                        â”‚                                â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚              â–¼                   â–¼                      â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚        â”‚ Avatar ç³»ç»Ÿ  â”‚    â”‚  ç½‘ç»œå±‚     â”‚              â”‚
â”‚        â”‚ (åŠ¨ç”» + ç‰©ç†)â”‚    â”‚ (WebSocket) â”‚              â”‚
â”‚        â”‚             â”‚    â”‚             â”‚              â”‚
â”‚        â”‚ â€¢ é£è¡ŒåŠ¨ç”»   â”‚    â”‚ â€¢ çŠ¶æ€åŒæ­¥   â”‚              â”‚
â”‚        â”‚ â€¢ è½¨è¿¹æ‹–å°¾   â”‚    â”‚ â€¢ å†²çªè§£å†³   â”‚              â”‚
â”‚        â”‚ â€¢ åä½œå…‰æŸ   â”‚    â”‚ â€¢ ç¦»çº¿é˜Ÿåˆ—   â”‚              â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚                  AI æœåŠ¡å±‚                        â”‚ â”‚
â”‚ â”‚  â€¢ å†…å®¹åˆ†ç±»ï¼ˆå…³é”®è¯è§„åˆ™ / äº‘ç«¯ LLMï¼‰               â”‚ â”‚
â”‚ â”‚  â€¢ æ‘˜è¦ç”Ÿæˆ                                      â”‚ â”‚
â”‚ â”‚  â€¢ å…±è¯†æ£€æµ‹                                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 å…³é”®æŠ€æœ¯é€‰å‹

| æ¨¡å— | æŠ€æœ¯ | ç†ç”± |
|-----|------|------|
| è·¨å¹³å° UI | Flutter | ç»Ÿä¸€ç§»åŠ¨ç«¯/æ¡Œé¢ç«¯/Web |
| 3D æ¸²æŸ“ | CustomPainter | çº¯ Dart å®ç°ï¼Œæ— éœ€ FFIï¼Œçƒ­é‡è½½å‹å¥½ |
| åŠ¨ç”» | Flutter Animation | å†…ç½® Tween + Physics |
| çŠ¶æ€ç®¡ç† | Riverpod | å“åº”å¼ï¼Œä¾èµ–æ³¨å…¥ |
| ç½‘ç»œ | WebSocket + æœ¬åœ°å­˜å‚¨ | å®æ—¶åŒæ­¥ + ç¦»çº¿ä¼˜å…ˆ |
| AI åˆ†æ | äº‘ç«¯ API (OpenAI/Claude) | æ— éœ€æœ¬åœ°æ¨¡å‹ï¼Œå“åº”å¿« |
| éŸ³é¢‘å½•åˆ¶ | åŸç”Ÿå¹³å°é€šé“ | macOS AVAudioRecorder |

### 3.3 ä¸ºä»€ä¹ˆæ”¾å¼ƒ Rust FFIï¼Ÿ

| é—®é¢˜ | è¯´æ˜ |
|-----|------|
| **ç¼–è¯‘å¤æ‚** | flutter_rust_bridge ç”Ÿæˆä»£ç å¤æ‚ï¼Œç±»å‹å†²çªé¢‘ç¹ |
| **è°ƒè¯•å›°éš¾** | è·¨è¯­è¨€è°ƒè¯•é“¾è·¯é•¿ï¼Œå †æ ˆä¿¡æ¯æ–­è£‚ |
| **çƒ­é‡è½½å¤±æ•ˆ** | Rust ä»£ç ä¿®æ”¹éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œå¼€å‘æ•ˆç‡ä½ |
| **å›¢é˜Ÿæˆæœ¬** | éœ€è¦åŒæ—¶æŒæ¡ Flutter + Rustï¼Œæ‹›äººå›°éš¾ |
| **è¿‡åº¦è®¾è®¡** | é¡¹ç›®åˆæœŸä¸éœ€è¦ Rust çš„æ€§èƒ½ä¼˜åŠ¿ |

**æ›¿ä»£æ–¹æ¡ˆ**ï¼šFlutter CustomPainter åš 3D æŠ•å½± + Dart å®ç°æ ¸å¿ƒé€»è¾‘ï¼Œæ€§èƒ½å®Œå…¨å¤Ÿç”¨ã€‚

---

## 4. æ ¸å¿ƒæ•°æ®æ¨¡å‹ï¼ˆDartï¼‰

### 4.1 èŠ‚ç‚¹ (VineNode)

```dart
class VineNode {
  final String id;
  final String messageId;           // å…³è”åŸå§‹æ¶ˆæ¯
  final SpaceTimePoint position;    // æ—¶ç©ºåæ ‡
  
  // å†…å®¹
  final String content;             // è¯­éŸ³è½¬æ–‡å­—
  final String contentPreview;      // å‰ 100 å­—æ‘˜è¦
  
  // èŠ‚ç‚¹ç±»å‹ä¸çŠ¶æ€
  final NodeType nodeType;          // message/branch/merge/milestone/aiSummary
  final NodeStatus status;          // draft/committed/confirmed/archived
  
  // æ‹“æ‰‘è¿æ¥
  final String? parentId;           // ä¸Šçº§èŠ‚ç‚¹
  final List<String> branchIds;     // åˆ†å‰å­èŠ‚ç‚¹
  final String? mergeTargetId;      // åˆå¹¶ç›®æ ‡
  
  // AI ç”Ÿæˆ
  final List<LeafAttachment> leaves;
  
  // å…ƒæ•°æ®
  final String authorId;
  final DateTime createdAt;
  final Map<String, int> vectorClock;  // CRDT ç‰ˆæœ¬å‘é‡
}
```

### 4.2 Avatar

```dart
class Avatar {
  final String id;
  final String name;
  final Color color;
  
  // 3D çŠ¶æ€
  Offset3D position;
  Offset3D velocity;
  double energy;        // 0.0 - 1.0
  
  // çŠ¶æ€æœº
  AvatarState state;    // idle/flying/working/teleporting
  List<Offset3D> trail; // é£è¡Œè½¨è¿¹ï¼ˆç”¨äºæ‹–å°¾æ•ˆæœï¼‰
  
  // åŠ¨ç”»
  AnimationController? flyAnimation;
  Offset3D? flyTarget;
}
```

### 4.3 AI å¶å­

```dart
class LeafAttachment {
  final String id;
  final LeafType type;      // summary/actionItems/decision/riskAlert/insight
  final String title;
  final String content;
  final List<TodoItem> todos;
  final double relevanceScore;  // 0.0 - 1.0
  final DateTime generatedAt;
}
```

---

## 5. æ ¸å¿ƒç³»ç»Ÿå®ç°

### 5.1 3D è—¤è”“å¼•æ“ï¼ˆFlutter CustomPainterï¼‰

**åæ ‡å˜æ¢æµç¨‹**ï¼š
```
ä¸–ç•Œåæ ‡ (x, y, z) 
  â†’ ç¼©æ”¾ (zoom)
  â†’ Yè½´æ—‹è½¬ (ç¯ç»•) 
  â†’ Xè½´æ—‹è½¬ (ä¿¯ä»°) 
  â†’ é€è§†æŠ•å½± 
  â†’ å±å¹•åæ ‡ (x, y) + æ·±åº¦ (z) + ç¼©æ”¾å› å­ (scale)
```

**å…³é”®ç®—æ³•**ï¼š

| ç®—æ³• | ç”¨é€” | ä½ç½® |
|-----|------|------|
| **èºæ—‹æŸ±å¸ƒå±€** | æ—¶é—´è½´ + å‚ä¸è€…ç¯ç»• | `VineLayoutEngine.computeLayout()` |
| **3D æŠ•å½±** | é€è§†/ç­‰è§’åˆ‡æ¢ | `Viewport3D.project()` |
| **Z æ·±åº¦æ’åº** | æ­£ç¡®é®æŒ¡ | æ¸²æŸ“å‰å¯¹èŠ‚ç‚¹æ’åº |
| **è´å¡å°”æ›²çº¿** | è—¤è”“è‡ªç„¶å¼¯æ›² | `ChronoVinePainter._drawVine()` |

### 5.2 Avatar é£è¡ŒåŠ¨ç”»

**çŠ¶æ€æœº**ï¼š
```
Idle â”€â”€[flyTo()]â”€â”€â–º Flying â”€â”€[åˆ°è¾¾]â”€â”€â–º Idle
                   â”‚
                   â””â”€â”€[é è¿‘èŠ‚ç‚¹]â”€â”€â–º Working â”€â”€[å®Œæˆ]â”€â”€â–º Idle
```

**åŠ¨ç”»æ›²çº¿**ï¼š
- èµ·é£ï¼š easeOutQuadï¼ˆå¿«é€Ÿç¦»å¼€ï¼‰
- å·¡èˆªï¼š linearï¼ˆåŒ€é€Ÿï¼‰
- é™è½ï¼š easeInOutCubicï¼ˆå¹³æ»‘å‡é€Ÿï¼‰

**ç‰©ç†æ•ˆæœ**ï¼š
- è½¨è¿¹æ‹–å°¾ï¼šä¿ç•™æœ€è¿‘ 50 å¸§ä½ç½®
- æœå‘ï¼šè‡ªåŠ¨è½¬å‘é£è¡Œæ–¹å‘
- å‘å…‰ï¼šèƒ½é‡å€¼å½±å“å…‰æ™•å¼ºåº¦

### 5.3 ç½‘ç»œåŒæ­¥

**æ¶æ„**ï¼šä¸­å¿ƒåŒ–æœåŠ¡å™¨ + WebSocket

**åŒæ­¥æµç¨‹**ï¼š
1. å®¢æˆ·ç«¯ A åˆ›å»ºèŠ‚ç‚¹ â†’ æœ¬åœ°ç«‹å³æ¸²æŸ“
2. å‘é€åˆ°æœåŠ¡å™¨ â†’ è¿›å…¥ç¦»çº¿é˜Ÿåˆ—ï¼ˆå¦‚æœæ–­ç½‘ï¼‰
3. æœåŠ¡å™¨å¹¿æ’­ â†’ å…¶ä»–å®¢æˆ·ç«¯æ¥æ”¶
4. å†²çªè§£å†³ â†’ åŸºäº Vector Clock çš„æœ€åå†™å…¥èƒœå‡º

**æ¶ˆæ¯ç±»å‹**ï¼š
```dart
enum MessageType {
  nodeCreated,
  nodeUpdated,
  nodeDeleted,
  avatarMoved,
  leafGenerated,
  userJoined,
  userLeft,
}
```

### 5.4 AI åˆ†æ

**è§¦å‘æ—¶æœº**ï¼š
- æ–°èŠ‚ç‚¹åˆ›å»ºå 2 ç§’ï¼ˆé˜²æŠ–ï¼‰
- æ‰‹åŠ¨ç‚¹å‡»"åˆ†æ"æŒ‰é’®
- ä¼šè®®ç»“æŸæ‰¹é‡ç”Ÿæˆ

**åˆ†ææµç¨‹**ï¼š
```
æ–‡æœ¬å†…å®¹ 
  â†’ å…³é”®è¯è§„åˆ™åˆ†ç±»ï¼ˆå¿«é€Ÿï¼‰
  â†’ äº‘ç«¯ LLM æ‘˜è¦ï¼ˆå¼‚æ­¥ï¼‰
  â†’ æå–è¡ŒåŠ¨é¡¹
  â†’ ç”Ÿæˆ LeafAttachment
  â†’ æœ¬åœ°æ¸²æŸ“
```

---

## 6. å¼€å‘è§„èŒƒ

### 6.1 ä»£ç ç»„ç»‡

```
lib/
â”œâ”€â”€ main.dart
â”œâ”€â”€ app.dart
â”œâ”€â”€ core/                      # æ ¸å¿ƒå·¥å…·
â”‚   â”œâ”€â”€ constants.dart
â”‚   â”œâ”€â”€ theme.dart
â”‚   â””â”€â”€ utils.dart
â”œâ”€â”€ models/                    # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ chrono_vine/
â”‚   â”‚   â”œâ”€â”€ vine_node.dart
â”‚   â”‚   â”œâ”€â”€ leaf_attachment.dart
â”‚   â”‚   â””â”€â”€ space_time_axis.dart
â”‚   â””â”€â”€ avatar.dart
â”œâ”€â”€ services/                  # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ audio/
â”‚   â”‚   â””â”€â”€ voice_recording.dart
â”‚   â”œâ”€â”€ chrono_vine/
â”‚   â”‚   â”œâ”€â”€ vine_layout_engine.dart
â”‚   â”‚   â””â”€â”€ topology_analyzer.dart
â”‚   â”œâ”€â”€ avatar/
â”‚   â”‚   â””â”€â”€ avatar_service.dart
â”‚   â”œâ”€â”€ network/
â”‚   â”‚   â””â”€â”€ connection_manager.dart
â”‚   â””â”€â”€ ai/
â”‚       â””â”€â”€ ai_service.dart
â”œâ”€â”€ state/                     # çŠ¶æ€ç®¡ç†ï¼ˆRiverpodï¼‰
â”‚   â”œâ”€â”€ room_provider.dart
â”‚   â”œâ”€â”€ viewport_provider.dart
â”‚   â””â”€â”€ avatar_provider.dart
â”œâ”€â”€ ui/                        # UI å±‚
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ home_screen.dart
â”‚   â”‚   â””â”€â”€ room_screen.dart
â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â”œâ”€â”€ vine_canvas.dart
â”‚   â”‚   â”œâ”€â”€ avatar_overlay.dart
â”‚   â”‚   â””â”€â”€ chat/
â”‚   â””â”€â”€ painters/
â”‚       â””â”€â”€ chrono_vine_painter.dart
â””â”€â”€ bridge/                    # åŸç”Ÿå¹³å°é€šé“
    â””â”€â”€ audio_recorder.dart
```

### 6.2 å‘½åè§„èŒƒ

- **Dart**: `lowerCamelCase` å˜é‡/å‡½æ•°ï¼Œ`UpperCamelCase` ç±»ï¼Œ`lowercase_with_underscores` æ–‡ä»¶

---

## 7. é‡Œç¨‹ç¢‘è§„åˆ’

### Phase 1: æ ¸å¿ƒå¾ªç¯éªŒè¯ (MVP)
- [x] å• Avatar é£è¡Œæ§åˆ¶
- [x] è¯­éŸ³å½•åˆ¶ï¼ˆåŸç”Ÿå¹³å°é€šé“ï¼‰
- [ ] æ”¾ç½® VoiceBlock èŠ‚ç‚¹
- [ ] ç®€å•æ—¶é—´è½´å›æ”¾

### Phase 2: å¤šäººåä½œ
- [ ] WebSocket è¿æ¥
- [ ] å¤š Avatar åŒæ­¥æ˜¾ç¤º
- [ ] èŠ‚ç‚¹è¿æ¥ä¸åˆ†å‰
- [ ] äº‰è®®è§£å†³å¯è§†åŒ–

### Phase 3: AI å¢å¼º
- [ ] äº‘ç«¯ AI æ‘˜è¦
- [ ] è‡ªåŠ¨ç”Ÿæˆ Leaf
- [ ] å»¶æ—¶æ‘„å½±å›æ”¾

### Phase 4: å•†ä¸šåŒ–
- [ ] æˆ¿é—´ç®¡ç†
- [ ] å¯¼å‡º Markdown/PDF
- [ ] API æ¥å…¥ï¼ˆé£ä¹¦/é’‰é’‰ï¼‰

---

## 8. ç»™ Agent çš„æŒ‡ä»¤æ¨¡æ¿

```
é¡¹ç›®ï¼šGraphMeeting - å¼‚æ­¥éçº¿æ€§ä¼šè®®å·¥å…·
æ¶æ„ï¼šçº¯ Flutterï¼Œæ—  FFI
å½“å‰é˜¶æ®µï¼š{Phase 1/2/3/4}

æ ¸å¿ƒæ¦‚å¿µï¼š
- Avatarï¼šå‚ä¸è€…çš„ 3D åŒ–èº«ï¼ŒFlutter åŠ¨ç”»å®ç°é£è¡Œ
- VineNodeï¼šæƒ³æ³•çš„ç‰©ç†è¡¨ç°ï¼ŒCustomPainter æ¸²æŸ“
- Space-Time Vineï¼šæ—¶é—´è½´ + å‚ä¸è€…è½¨é“ + è¯­ä¹‰å±‚çº§
- WebSocketï¼šå®æ—¶çŠ¶æ€åŒæ­¥

è¯·ç”Ÿæˆ {å…·ä½“æ¨¡å—}ï¼Œæ³¨æ„ï¼š
1. çº¯ Dart å®ç°ï¼Œä¸ä½¿ç”¨ Rust FFI
2. ä½¿ç”¨ Riverpod ç®¡ç†çŠ¶æ€
3. CustomPainter åš 3D æŠ•å½±æ¸²æŸ“
4. è€ƒè™‘ç¦»çº¿åœºæ™¯ï¼ˆç½‘ç»œä¸å¯ç”¨æ—¶æœ¬åœ°ç¼“å­˜ï¼‰
```

---

*æœ€åæ›´æ–°ï¼š2026-02-06*  
*æ¶æ„å˜æ›´ï¼šFlutter + Rust FFI â†’ çº¯ Flutter*  
*åŸå› ï¼šç®€åŒ–æ¶æ„ï¼ŒåŠ é€Ÿå¼€å‘ï¼Œé™ä½å›¢é˜Ÿæˆæœ¬*
